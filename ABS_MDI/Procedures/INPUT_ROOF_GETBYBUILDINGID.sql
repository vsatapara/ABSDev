CREATE OR REPLACE PROCEDURE abs_mdi."INPUT_ROOF_GETBYBUILDINGID" 
(
    BuildingId IN VARCHAR2,
    OUTPUT_TABLE OUT  SYS_REFCURSOR
)
AS
BEGIN
OPEN OUTPUT_TABLE FOR SELECT
    "RoofId",
    "Type",
    "Gauge",
    "ULRating",
    "Width",
    "Profile",
    "Thick",
    "Clip",
    "NotByStar",
    "StructScrews",
    "StitchScrews",
    "Material",
    "ThermalBlock",
    "MetalRibClosure",
    "SealedRoof",
    "RidgePan",
    "AlignmentStrip",
    "ULLetter",
    "EavePanelExtension",
    "IsBuyout",
    "SquareFeet",
    "ThermalBlockThickness",
    "ProvideBlocks",
    "RoofFirst",
    "InsulationClips",
    "Weathertightness",
    "SealedEave",
    "ThickInsulation",
    "RTSSystem",
    "RTSFinish",
    "RTSPanelType",
    "RTSThickness",
    "RTSSpacing",
    "ThermalBlockType",
    "FastenerType",
    "FastenerHeadFinish",
    "FastenerLength",
    "WideTape",
    "EaveIcing",
    "Warranty",
    "FactoryAppliedSealant",
    "WeathertightnessTerm",
    "IMPAccLoads",
    "SeamerRental",
    "StainlessSteelCaps",
    "NonhandedErection",
    "Direction",
    "ProvideHandTools",
    "RTSPanelGauge",
    "FastenerVender",
    "ExteriorSkinTexture",
    "FMRating",
    "RoofNavNumber",
    "WindRating",
    hass5clamps,
    "IMPPlant",
    "IMPLoads",
    "IncludeToolKit",
    "ColdStorageBuilding",
    "InteriorSkinProfile",
    "InteriorSkinGauge",
    "InteriorSkinTexture",
    "HasSnowRetentionSystem",
    "SnowRetentionRp1",
    "SnowRetentionRp2",
    "SnowRetentionRp3",
    "SnowRetentionRp4",
    "IncludeSnowClipPerPanel",
    "SnowClipQuantity",
    "ColorStripQuantity",
    "Rp1SnowLoad",
    "Rp2SnowLoad",
    "Rp3SnowLoad",
    "Rp4SnowLoad",
    "BuildingInformationId",
    "IpAddress",
    "CreatedBy",
    "CreatedDate",
    "ModifiedBy",
    "ModifiedDate",
    "BURLoad",
    "FinishWarranty",
    "RValue"
FROM
    "Input_Roof"
WHERE
                "BuildingInformationId" in
                ( 
                        SELECT regexp_substr(BuildingId,'[^,]+', 1, level) from dual
                        connect by regexp_substr(BuildingId, '[^,]+', 1, level) is not null
                );
END;
/